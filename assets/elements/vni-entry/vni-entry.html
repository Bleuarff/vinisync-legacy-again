<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/vaadin-combo-box/vaadin-combo-box.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu-light.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tab.html">
<link rel="import" href="../../bower_components/paper-checkbox/paper-checkbox.html">
<link rel='import' href="../vni-cepages/vni-cepages.html">
<link rel="import" href="../vni-color/vni-color.html">
<link rel='import' href="../../styles/shared-styles.html">

<dom-module id='vni-entry'>
  <template>
    <style include='shared-styles'>
      .apogee {
        display: flex;
        flex-flow: row nowrap;
        align-items: center;
      }

      .containing {
        width: 100%;
      }

      paper-tabs {
        --paper-tabs-selection-bar-color: darkred;
        font-size: 1rem;
      }

      .tags {
        display: flex;
        flex-flow: row wrap;
        justify-content: space-around;
      }

    </style>

    <app-route route="{{route}}"
    pattern="/:id"
    data="{{routeData}}">
    </app-route>

    <vaadin-combo-box id='appellation' label='Appellation' value='{{entry.bottle.appellation}}' allow-custom-value='true'
    on-input='appellationChanged'>
    </vaadin-combo-box>

    <vaadin-combo-box id='producer' label='Producteur' value='{{entry.bottle.producer}}' allow-custom-value='true'
    on-input='producerChanged'>
    </vaadin-combo-box>

    <paper-input id='name' label='Cuvée' value='{{entry.bottle.name}}'></paper-input>

    <paper-input id='year' label='Millésime' value='{{entry.bottle.year}}' type='number' min='1700' max='[[currentYear]]'>
    </paper-input>

    <vaadin-combo-box label='Pays' value='{{entry.bottle.country}}' items='[[countries]]' allow-custom-value='true'></vaadin-combo-box>

    <div class='apogee'>
      <paper-input label='Apogée' value='{{entry.bottle.apogeeStart}}' type='number' min='1700'></paper-input>
      -
      <paper-input label="Jusqu'à" value='{{entry.bottle.apogeeEnd}}' type='number' min='[[entry.bottle.apogeeStart]]'></paper-input>
    </div>

    <vni-color color='{{entry.bottle.color}}'></vni-color>

    <paper-input label='Quantité' type='number' value='{{entry.count}}' min='1' max='100'></paper-input>

    <vni-cepages cepages='[[cepages]]'></vni-cepages>

    <span>Détails:</span>
    <div class='tags'>
      <paper-checkbox checked='{{entry.bottle.sparkling}}' class='tag'>pétillant</paper-checkbox>
      <paper-checkbox checked='{{entry.bottle.sweet}}' class='tag'>liquoreux</paper-checkbox>
    </div>

    <paper-dropdown-menu-light label='Contenant' class='containing'>
      <paper-tabs class='dropdown-content' attr-for-selected='value' selected='{{entry.bottle.containing}}'>
        <template is='dom-repeat' items='[[containings]]'>
          <paper-tab value='[[item]]'>[[item]]</paper-tab>
        </template>
      </paper-tabs>
    </paper-dropdown-menu-light>

    <paper-input label='Offert par' value='{{entry.offeredBy}}'></paper-input>

    <paper-button class='default' on-tap='save'>Enregistrer</paper-button>
  </template>
  <script src="vni-entry.js"></script>
</dom-module>
