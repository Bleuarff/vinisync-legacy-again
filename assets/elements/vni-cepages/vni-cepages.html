<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel='import' href="../../bower_components/vaadin-combo-box/vaadin-combo-box.html">
<link rel='import' href="../../styles/shared-styles.html">

<dom-module is='vni-cepages'>
  <template>
    <style include='shared-styles'>
      :host {
        display: block;
        padding: 8px 5px;
      }

      .label {
        display: block;
        margin-bottom: 0.4rem;
      }

      .cpg {
        display: inline-block;
        margin: 0 0 .5rem 5px;
        background-color: white;
        color: var(--vni-blue-light);
        border-radius: 8px;
        border: 2px solid var(--vni-blue-light);
        -moz-user-select: none;
        -webkit-user-select: none;
        user-select: none;
        cursor: pointer;
      }

      .readonly-true {
        cursor: default;
      }

      .value {
        display: inline-block;
        padding: 8px;
      }

      .clear {display: none;}

      .selected .clear {
        display: inline-block;
        padding-right: 5px;
      }

      .input-block {
        display: flex;
        flex-flow: row nowrap;
      }

      .add {vertical-align: bottom;}

      .add span {
        display: inline-block;
        width: 2rem;
        height: 2rem;
        margin: 1.3rem 0 7px 1rem;
        margin-top: 1.3rem;
        margin-right: 1rem;
        line-height: 2rem;
        border-radius: 4px;
        font-size: 1.5rem;
        text-align: center;
        background: var(--vni-main-color);
        color: white;
        cursor: pointer;
      }

      .input {
        flex-grow: 1;
      }

    </style>

    <span class='label'>Cepages:</span>

    <div>
      <template is='dom-repeat' items='[[cepages]]'>
        <span class$='cpg readonly-[[readonly]]' on-blur='unselect' tabindex='1'>
          <span class='value' on-tap='select'>{{item.value}}</span>
          <iron-icon class='clear' icon='icons:clear' on-tap='delete'></iron-icon>
        </span>
      </template>
    </div>

    <template is='dom-if' if='[[!readonly]]'>
      <div class='input-block'>
        <vaadin-combo-box label='Ajouter un cÃ©page' class='input'
        allow-custom-value='true' items='[[fullList]]'>
        </vaadin-combo-box>
        <div class='add'>
          <span on-tap='add'>+</span>
        </div>
      </div>
    </template>

  </template>
  <script src='vni-cepages.js'></script>
</dom-module>
