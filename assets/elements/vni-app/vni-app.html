<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-scroll-header-panel/paper-scroll-header-panel.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../vni-main-menu/vni-main-menu.html">

<link rel='import' href="../../styles/shared-styles.html">

<dom-module id="vni-app">
  <template>
    <style include='shared-styles'>
      :host {
        display: block;
        height: 100vh;
      }

      paper-scroll-header-panel {
        height: 100%;
      }

      #pages {
        max-width: 1000px;
        margin: auto;
      }

      paper-toolbar {
        --paper-toolbar-background: var(--vni-main-color);
      }

      .pseudo-title {
        flex: 1;
        margin-left: 2em;
      }

      .pseudo-title a {
        color: white;
        text-decoration: none;
        display: inline-block;
        margin-right: 2em;
        font-family: 'Roboto', 'Noto', sans-serif;
        -webkit-font-smoothing: antialiased;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: 20px;
        font-weight: 400;
        line-height: 1;
      }

      paper-toolbar a:last-child{
        margin-right: 0;
      }

      .toast-hide-btn {
        color: #eeff41;
        float: right;
        cursor: pointer;
      }

      .overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 90;
      }

    </style>

    <app-location route="{{route}}"></app-location>
    <app-route route="{{route}}" pattern="/:page" data="{{routeData}}"></app-route>
    <app-route route="[[route]]" pattern="/cave" tail="{{caveRoute}}"></app-route>
    <app-route route="[[route]]" pattern="/entry" tail="{{entryRoute}}"></app-route>
    <app-route route="[[route]]" pattern="/home" tail="{{homeRoute}}"></app-route>
    <app-route route="[[route]]" pattern="/signin"></app-route>

    <paper-scroll-header-panel class="flex">
      <paper-toolbar>
        <a href='/home'>
          <img src='/img/vinisync-logo.svg' width='40' height='40'/>
        </a>
        <div class="pseudo-title">
          <a  href="/cave">Cave</a>
        </div>
        <paper-icon-button icon='menu' on-tap='toggleMenu' class$='[[hidden(signedIn)]]'></paper-icon-button>
      </paper-toolbar>

      <iron-pages id='pages'
          selected="[[page]]"
          attr-for-selected="name"
          fallback-selection="z404"
          role="main">
        <vni-home name="home" route='[[homeRoute]]' signed-in='[[signedIn]]'></vni-home>
        <vni-signin name="signin"></vni-signin>
        <vni-cave name="cave" route='[[caveRoute]]' page='[[page]]' signed-in='[[signedIn]]'></vni-cave>
        <vni-entry name='entry' route='[[entryRoute]]'></vni-entry>
        <vni-z401 name="z401" from='[[from]]'></vni-z401>
        <vni-z404 name="z404"></vni-z404>
      </iron-pages>

    </paper-scroll-header-panel>

    <div class="overlay hidden" on-tap="hideMenu"></div>
    <vni-main-menu class='drawer'>
    </vni-main-menu>

    <paper-toast id='errorToast' duration='0'>
      <span class="toast-hide-btn" role="button" tabindex="0" on-tap="hideError">OK</span>
    </paper-toast>
    <paper-toast id='successToast'></paper-toast>

  </template>
  <script src="vni-app.js"></script>
</dom-module>
