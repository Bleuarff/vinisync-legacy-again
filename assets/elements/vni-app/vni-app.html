<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-scroll-header-panel/paper-scroll-header-panel.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/google-signin/google-signin-aware.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">

<dom-module id="vni-app">
  <template>
    <style>
      :host {
        display: block;
        height: 100vh;
      }

      paper-scroll-header-panel {
        height: 100%;
      }

      paper-toolbar {
        --paper-toolbar-background: darkred;
      }

      .pseudo-title {
        flex: 1;
        margin-left: 56px;
      }

      paper-toolbar a {
        color: white;
        text-decoration: none;
        display: inline-block;
        margin-right: 2em;
        font-family: 'Roboto', 'Noto', sans-serif;
        -webkit-font-smoothing: antialiased;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: 20px;
        font-weight: 400;
        line-height: 1;
      }

      paper-toolbar a:last-child{
        margin-right: 0;
      }

    </style>

    <app-location use-hash-as-path route="{{route}}"></app-location>
    <app-route route="{{route}}" pattern="/:page" data="{{routeData}}" tail="{{subroute}}"></app-route>

    <google-signin-aware id='google-signin' client-id="822030501141-4dn7d2h8ueid9h7ot7m788vqokclodg5.apps.googleusercontent.com"
    on-google-signin-aware-success='signinSuccess' offline='true' signed-in={{signedIn}}></google-signin-aware>

    <paper-scroll-header-panel class="flex">
      <paper-toolbar>
        <!-- <span class='title'>[[name]]</span> -->
        <!-- TODO: vinisync icon, return to home page -->
        <div class="pseudo-title">
          <a  href="#/home">Home</a>
          <a  href="#/cave">Cave</a>
        </div>
        <paper-icon-button icon="add">Ajouter une entr√©e</paper-icon-button>
        <paper-icon-button icon="settings">Settings</paper-icon-button>
      </paper-toolbar>

      <iron-pages id='pages'
          selected="[[page]]"
          attr-for-selected="name"
          fallback-selection="z404"
          role="main">
        <vni-home name="home" signed-in='[[signedIn]]'></vni-home>
        <vni-cave name="cave" route='{{subroute}}'></vni-cave>
        <vni-entry name='entry' route='{{subroute}}'></vni-entry>
        <vni-z404 name="z404"></vni-z404>
      </iron-pages>
    </paper-scroll-header-panel>

  <paper-toast id='errorToast'></paper-toast>

  </template>
  <script src="vni-app.js"></script>
</dom-module>
