<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/paper-scroll-header-panel/paper-scroll-header-panel.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/google-signin/google-signin-aware.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">
<link rel="import" href="../../bower_components/iron-dropdown/iron-dropdown.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel='import' href="../../styles/shared-styles.html">

<dom-module id="vni-app">
  <template>
    <style include='shared-styles'>
      :host {
        display: block;
        height: 100vh;
      }

      paper-scroll-header-panel {
        height: 100%;
      }

      #pages {
        max-width: 1000px;
        margin: auto;
      }

      paper-toolbar {
        --paper-toolbar-background: var(--vni-main-color);
      }

      .pseudo-title {
        flex: 1;
        margin-left: 2em;
      }

      .pseudo-title a {
        color: white;
        text-decoration: none;
        display: inline-block;
        margin-right: 2em;
        font-family: 'Roboto', 'Noto', sans-serif;
        -webkit-font-smoothing: antialiased;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: 20px;
        font-weight: 400;
        line-height: 1;
      }

      paper-toolbar a:last-child{
        margin-right: 0;
      }

      .toast-hide-btn {
        color: #eeff41;
        float: right;
        cursor: pointer;
      }

      iron-dropdown .dropdown-content {
        background-color: white;
        color: #333;
        line-height: 20px;
        border-radius: 3px;
        box-shadow: 0px 2px 6px #ccc;
        min-width: 200px;
      }

      .dropdown-content paper-item {
        border-top: 1px solid #ccc;
      }

      paper-item.action {
        cursor: pointer;
      }
    </style>

    <app-location route="{{route}}"></app-location>
    <app-route route="{{route}}" pattern="/:page" data="{{routeData}}"></app-route>
    <app-route route="[[route]]" pattern="/cave" tail="{{caveRoute}}"></app-route>
    <app-route route="[[route]]" pattern="/entry" tail="{{entryRoute}}"></app-route>

    <google-signin-aware id='google-signin' client-id="822030501141-4dn7d2h8ueid9h7ot7m788vqokclodg5.apps.googleusercontent.com"
    on-google-signin-aware-success='signinSuccess' offline='true' signed-in={{signedIn}}></google-signin-aware>

    <paper-scroll-header-panel class="flex">
      <paper-toolbar>
        <a href='/home'>
          <img src='/img/vinisync-logo.svg' width='40' height='40'/>
        </a>
        <div class="pseudo-title">
          <a  href="/cave">Cave</a>
        </div>
        <paper-icon-button icon='settings' on-tap='toggleAppMenu'>Settings</paper-icon-button>
        <iron-dropdown id='settings-menu' horizontal-align="right" vertical-align="top" vertical-offset="40">
          <div class='dropdown-content'>
            <div role='listbox'>
              <paper-item class='action' on-tap='logout'>DÃ©connexion</paper-item>
            </div>
          </div>
        </iron-dropdown>
      </paper-toolbar>

      <iron-pages id='pages'
          selected="[[page]]"
          attr-for-selected="name"
          fallback-selection="z404"
          role="main">
        <vni-home name="home" signed-in='[[signedIn]]'></vni-home>
        <vni-cave name="cave" route='[[caveRoute]]' page='[[page]]'></vni-cave>
        <vni-entry name='entry' route='[[entryRoute]]'></vni-entry>
        <vni-z404 name="z404"></vni-z404>
      </iron-pages>

    </paper-scroll-header-panel>

    <paper-toast id='errorToast' duration='0'>
      <span class="toast-hide-btn" role="button" tabindex="0" on-tap="hideError">OK</span>
    </paper-toast>
    <paper-toast id='successToast'></paper-toast>

  </template>
  <script src="vni-app.js"></script>
</dom-module>
